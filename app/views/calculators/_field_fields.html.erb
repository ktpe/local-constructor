<div class="nested-fields">
  <%= f.input :label, label: "Field Label:" %>
  <%= f.input :var_name, label: "Variable Name:" %>
  <%= f.input :field_type, 
      collection: [["Number", "number"], ["Category", "category"]],
      prompt: "Select Field Type",
      label: "Field Type:",
      input_html: { class: "field-type-select" } %>

  <div class="category-fields" style="display: none;">
    <%= f.simple_fields_for :categories do |category_fields| %>
      <%= render "category_fields", f: category_fields %>
    <% end %>
    <%= link_to_add_association "Add Category", f, :categories, partial: "category_fields" %>
  </div>

  <%= link_to_remove_association "Remove Field", f %>
</div>
