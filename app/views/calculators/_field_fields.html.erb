<div class="nested-fields border p-4 rounded-lg mb-4">
  <%= f.input :label, label: "Field Label:", input_html: { class: "border rounded p-2 w-full" }, label_html: { class: "font-semibold" } %>
  <%= f.input :var_name, label: "Variable Name:", input_html: { class: "border rounded p-2 w-full" }, label_html: { class: "font-semibold" } %>
  <%= f.input :field_type, 
      collection: [["Number", "number"], ["Category", "category"]],
      prompt: "Select Field Type",
      label: "Field Type:",
      input_html: { class: "field-type-select border rounded p-2 w-full" },
      label_html: { class: "font-semibold" } %>

  <div class="category-fields mt-4 hidden">
    <%= f.simple_fields_for :categories do |category_fields| %>
      <%= render "category_fields", f: category_fields %>
    <% end %>
    <%= link_to_add_association "Add Category", f, :categories, partial: "category_fields", class: "text-blue-500 hover:text-blue-700 underline" %>
  </div>

  <%= link_to_remove_association "Remove Field", f, class: "text-red-500 hover:text-red-700 underline mt-2 inline-block" %>
</div>
